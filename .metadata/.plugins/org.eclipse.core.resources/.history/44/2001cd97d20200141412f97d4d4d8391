package com.Functions;

import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import com.FileManager.FileSender;
import com.example.timetraveler.MainActivity;

public class ConnServer extends Thread {

	Socket sc;
	String authCode;
	
	String srvIp;
	int port;
	int opCode;

	public ConnServer(String srvIp , int port) {
		this.srvIp = srvIp;
		this.port = port;
	}
	
	public ConnServer(String srvIp , int port, int opCode) {
		this.srvIp = srvIp;
		this.port = port;
		this.opCode = opCode;
	}
	
	@Override
	public void run() {
		try {
			// File 전송 절차 
			/*
			 * 1. 소켓연결
			 * 2. Opcode 포함한 Payload 전송 전송
			 * 3. 파일 Sender를 통한 파일전송
			 * 4.
			 */

			// 1
			sc = new Socket(srvIp, port);
			
			// 2
			Payload pl = new Payload(1);

			// 3
			FileSender fs = new FileSender(MainActivity.homePath, this.sc);
			
			
			
			
			sc.close();
		} catch (UnknownHostException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
